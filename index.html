<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>X-Ray Goggles - Hackasaurus</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #d35400;
            margin-bottom: 10px;
        }
        
        .nav {
            margin-bottom: 30px;
        }
        
        .nav a {
            color: #d35400;
            text-decoration: none;
            margin: 0 15px;
            font-weight: 500;
        }
        
        .nav a:hover {
            text-decoration: underline;
        }
        
        .mozilla-badge {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .mozilla-badge img {
            height: 40px;
        }
        
        h1 {
            color: #d35400;
            font-size: 2.2em;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .browser-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .steps {
            background-color: #e8f5e8;
            padding: 30px;
            border-radius: 8px;
            margin: 30px 0;
        }
        
        .steps h2 {
            color: #27ae60;
            margin-top: 0;
        }
        
        .step {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #27ae60;
        }
        
        .step strong {
            color: #27ae60;
        }
        
        .url-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .feature h3 {
            color: #d35400;
            margin-top: 0;
        }
        
        .achievement {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
            text-align: center;
        }
        
        .achievement h3 {
            color: #856404;
            margin-top: 0;
        }
        
        .social {
            text-align: center;
            margin: 30px 0;
        }
        
        .social a {
            color: #1da1f2;
            text-decoration: none;
            font-weight: bold;
        }
        
        .social a:hover {
            text-decoration: underline;
        }
        
        .links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .link-section h3 {
            color: #d35400;
            margin-top: 0;
        }
        
        .link-section ul {
            list-style: none;
            padding: 0;
        }
        
        .link-section li {
            margin: 8px 0;
        }
        
        .link-section a {
            color: #d35400;
            text-decoration: none;
        }
        
        .link-section a:hover {
            text-decoration: underline;
        }
        
        .languages {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .languages h3 {
            color: #d35400;
            margin-top: 0;
        }
        
        .languages a {
            color: #d35400;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .languages a:hover {
            text-decoration: underline;
        }
        
        .partners {
            text-align: center;
            margin: 30px 0;
        }
        
        .partners h3 {
            color: #d35400;
        }
        
        .legal {
            text-align: center;
            margin: 30px 0;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            color: #666;
        }
        
        .legal a {
            color: #d35400;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .legal a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9em;
        }
        
        /* X-Ray Goggles Styles */
        .goggles-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.1);
            z-index: 999999;
            pointer-events: none;
        }
        
        .goggles-highlight {
            position: absolute;
            border: 2px solid #ff6b35;
            background: rgba(255, 107, 53, 0.1);
            pointer-events: none;
            z-index: 1000000;
        }
        
        .goggles-toolbar {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff6b35;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
            font-size: 12px;
            z-index: 1000001;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .goggles-toolbar button {
            background: white;
            color: #ff6b35;
            border: none;
            padding: 5px 10px;
            margin: 2px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
        }
        
        .goggles-toolbar button:hover {
            background: #f0f0f0;
        }
        
        .goggles-editor {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #ff6b35;
            border-radius: 5px;
            padding: 20px;
            z-index: 1000002;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            min-width: 400px;
            max-width: 80%;
        }
        
        .goggles-editor h3 {
            margin-top: 0;
            color: #ff6b35;
        }
        
        .goggles-editor textarea {
            width: 100%;
            height: 200px;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
        }
        
        .goggles-editor button {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .goggles-editor button:hover {
            background: #e55a2b;
        }
        
        .goggles-help {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #ff6b35;
            border-radius: 5px;
            padding: 20px;
            z-index: 1000003;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            max-width: 500px;
        }
        
        .goggles-help h3 {
            margin-top: 0;
            color: #ff6b35;
        }
        
        .goggles-help ul {
            text-align: left;
        }
        
        .goggles-help li {
            margin: 10px 0;
        }
        
        .bookmarklet-button {
            display: inline-block;
            background: #ff6b35;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin: 10px;
            cursor: move;
            user-select: none;
        }
        
        .bookmarklet-button:hover {
            background: #e55a2b;
            color: white;
        }
        
        .demo-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .demo-image {
            max-width: 200px;
            height: auto;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">Hackasaurus</div>
            <nav class="nav">
                <a href="#goggles">Goggles</a>
                <a href="#resources">Resources</a>
                <a href="#events">Events</a>
                <a href="#about">About</a>
                <a href="#blog">Blog</a>
                <a href="#mozilla">Mozilla</a>
            </nav>
        </div>

        <div class="mozilla-badge">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkY5NTAwIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TW96aWxsYTwvdGV4dD4KPC9zdmc+" alt="Mozilla">
        </div>

        <h1>X-Ray Goggles</h1>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 30px;">Remix, make and share webpages instantly.</p>

        <div class="browser-warning">
            <strong>Sorry, but the goggles don't yet work on Microsoft Internet Explorer.</strong><br>
            Until they do, please use the latest version of Firefox, Opera, Chrome, or Safari.
        </div>

        <div class="steps">
            <h2>Make your first hack in three easy steps!</h2>
            
            <div class="step">
                <strong>1.</strong> Drag this bookmarklet to your bookmarks bar:
                <div style="text-align: center; margin: 15px 0;">
                    <a href="javascript:(function(){if(window.XRayGoggles){if(window.XRayGoggles.active){window.XRayGoggles.deactivate();}else{window.XRayGoggles.activate();}}else{var script=document.createElement('script');script.textContent='(function(){\"use strict\";window.XRayGoggles={active:false,overlay:null,highlight:null,toolbar:null,currentElement:null,history:[],historyIndex:-1,activate:function(){if(this.active)return;this.active=true;this.createOverlay();this.createToolbar();this.bindEvents();this.showHelp();},deactivate:function(){if(!this.active)return;this.active=false;this.removeOverlay();this.removeToolbar();this.unbindEvents();this.closeAllModals();},createOverlay:function(){this.overlay=document.createElement(\"div\");this.overlay.className=\"goggles-overlay\";this.overlay.style.cssText=\"position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.1);z-index:999999;pointer-events:none\";document.body.appendChild(this.overlay);this.highlight=document.createElement(\"div\");this.highlight.className=\"goggles-highlight\";this.highlight.style.cssText=\"position:absolute;border:2px solid #ff6b35;background:rgba(255,107,53,0.1);pointer-events:none;z-index:1000000\";document.body.appendChild(this.highlight);},removeOverlay:function(){if(this.overlay){this.overlay.remove();this.overlay=null;}if(this.highlight){this.highlight.remove();this.highlight=null;}},createToolbar:function(){this.toolbar=document.createElement(\"div\");this.toolbar.className=\"goggles-toolbar\";this.toolbar.style.cssText=\"position:fixed;top:10px;right:10px;background:#ff6b35;color:white;padding:10px;border-radius:5px;font-family:Arial,sans-serif;font-size:12px;z-index:1000001;box-shadow:0 2px 10px rgba(0,0,0,0.3)\";this.toolbar.innerHTML=\"<div>X-Ray Goggles Active</div><button onclick=\\\"XRayGoggles.showHelp()\\\">H - Help</button><button onclick=\\\"XRayGoggles.publish()\\\">P - Publish</button><button onclick=\\\"XRayGoggles.undo()\\\">Undo</button><button onclick=\\\"XRayGoggles.deactivate()\\\">Exit</button>\";document.body.appendChild(this.toolbar);},removeToolbar:function(){if(this.toolbar){this.toolbar.remove();this.toolbar=null;}},bindEvents:function(){this.mouseMoveHandler=this.handleMouseMove.bind(this);this.clickHandler=this.handleClick.bind(this);this.keyHandler=this.handleKeyPress.bind(this);document.addEventListener(\"mousemove\",this.mouseMoveHandler);document.addEventListener(\"click\",this.clickHandler);document.addEventListener(\"keydown\",this.keyHandler);},unbindEvents:function(){document.removeEventListener(\"mousemove\",this.mouseMoveHandler);document.removeEventListener(\"click\",this.clickHandler);document.removeEventListener(\"keydown\",this.keyHandler);},handleMouseMove:function(e){if(!this.active)return;var element=document.elementFromPoint(e.clientX,e.clientY);if(element&&element!==this.currentElement){this.currentElement=element;this.highlightElement(element);}},handleClick:function(e){if(!this.active)return;e.preventDefault();e.stopPropagation();if(this.currentElement){this.editElement(this.currentElement);}},handleKeyPress:function(e){if(!this.active)return;switch(e.key.toLowerCase()){case\"r\":e.preventDefault();if(this.currentElement){this.editElement(this.currentElement);}break;case\"p\":e.preventDefault();this.publish();break;case\"h\":e.preventDefault();this.showHelp();break;case\"escape\":e.preventDefault();this.closeAllModals();break;}},highlightElement:function(element){if(!this.highlight)return;var rect=element.getBoundingClientRect();this.highlight.style.left=(rect.left+window.scrollX)+\"px\";this.highlight.style.top=(rect.top+window.scrollY)+\"px\";this.highlight.style.width=rect.width+\"px\";this.highlight.style.height=rect.height+\"px\";this.highlight.style.display=\"block\";},editElement:function(element){this.saveToHistory();var editor=document.createElement(\"div\");editor.className=\"goggles-editor\";editor.style.cssText=\"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;border:2px solid #ff6b35;border-radius:5px;padding:20px;z-index:1000002;box-shadow:0 4px 20px rgba(0,0,0,0.3);min-width:400px;max-width:80%\";editor.innerHTML=\"<h3>Edit Element</h3><p><strong>Tag:</strong> \"+element.tagName.toLowerCase()+\"</p><p><strong>Current HTML:</strong></p><textarea id=\\\"goggles-html\\\" style=\\\"width:100%;height:200px;font-family:monospace;font-size:12px;border:1px solid #ccc;padding:10px;margin:10px 0\\\">\"+element.outerHTML+\"</textarea><br><button onclick=\\\"XRayGoggles.applyEdit(this)\\\" style=\\\"background:#ff6b35;color:white;border:none;padding:8px 16px;margin:5px;border-radius:3px;cursor:pointer\\\">Apply Changes</button><button onclick=\\\"XRayGoggles.closeModal(this)\\\" style=\\\"background:#ff6b35;color:white;border:none;padding:8px 16px;margin:5px;border-radius:3px;cursor:pointer\\\">Cancel</button>\";document.body.appendChild(editor);this.currentModal=editor;},applyEdit:function(button){var editor=button.closest(\".goggles-editor\");var textarea=editor.querySelector(\"textarea\");var newHTML=textarea.value;try{var temp=document.createElement(\"div\");temp.innerHTML=newHTML;var newElement=temp.firstElementChild;if(newElement&&this.currentElement){this.currentElement.parentNode.replaceChild(newElement,this.currentElement);this.currentElement=newElement;}this.closeModal(button);}catch(e){alert(\"Invalid HTML. Please check your syntax.\");}},publish:function(){var modal=document.createElement(\"div\");modal.className=\"goggles-editor\";modal.style.cssText=\"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;border:2px solid #ff6b35;border-radius:5px;padding:20px;z-index:1000002;box-shadow:0 4px 20px rgba(0,0,0,0.3);min-width:400px;max-width:80%\";modal.innerHTML=\"<h3>Publish Your Hack</h3><p>Your hack has been saved! Here is what you can do:</p><ul style=\\\"text-align:left\\\"><li>Share the URL with friends</li><li>Take a screenshot of your changes</li><li>Copy the modified HTML</li></ul><p><strong>Current URL:</strong> \"+window.location.href+\"</p><button onclick=\\\"XRayGoggles.closeModal(this)\\\" style=\\\"background:#ff6b35;color:white;border:none;padding:8px 16px;margin:5px;border-radius:3px;cursor:pointer\\\">Close</button>\";document.body.appendChild(modal);this.currentModal=modal;},showHelp:function(){var modal=document.createElement(\"div\");modal.className=\"goggles-help\";modal.style.cssText=\"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;border:2px solid #ff6b35;border-radius:5px;padding:20px;z-index:1000003;box-shadow:0 4px 20px rgba(0,0,0,0.3);max-width:500px\";modal.innerHTML=\"<h3>X-Ray Goggles Help</h3><ul><li><strong>Mouse over elements</strong> to highlight them</li><li><strong>Click or press R</strong> to edit an element</li><li><strong>Press P</strong> to publish your hack</li><li><strong>Press H</strong> to show this help</li><li><strong>Press Escape</strong> to close modals</li><li><strong>Undo button</strong> to revert changes</li></ul><p><em>Try editing any element on this page!</em></p><button onclick=\\\"XRayGoggles.closeModal(this)\\\" style=\\\"background:#ff6b35;color:white;border:none;padding:8px 16px;margin:5px;border-radius:3px;cursor:pointer\\\">Got it!</button>\";document.body.appendChild(modal);this.currentModal=modal;},saveToHistory:function(){if(this.currentElement){this.history=this.history.slice(0,this.historyIndex+1);this.history.push({element:this.currentElement,html:this.currentElement.outerHTML});this.historyIndex=this.history.length-1;}},undo:function(){if(this.historyIndex>0){this.historyIndex--;var state=this.history[this.historyIndex];if(state&&state.element&&state.element.parentNode){state.element.outerHTML=state.html;}}},closeModal:function(button){var modal=button.closest(\".goggles-editor, .goggles-help\");if(modal){modal.remove();}},closeAllModals:function(){var modals=document.querySelectorAll(\".goggles-editor, .goggles-help\");modals.forEach(function(modal){modal.remove();});}};})();\";document.head.appendChild(script);setTimeout(function(){if(window.XRayGoggles){window.XRayGoggles.activate();}},100);}})();" class="bookmarklet-button" draggable="true">üîç X-Ray Goggles</a>
                </div>
            </div>
            
            <div class="step">
                <strong>2.</strong> Click the bookmarklet to activate the X-Ray Goggles on any webpage.
            </div>
            
            <div class="step">
                <strong>3.</strong> Try it out on the demo image below! Move your mouse over it and tap <strong>R</strong> to edit!
            </div>
        </div>

        <div class="demo-section">
            <h3>Try the X-Ray Goggles!</h3>
            <p>Click the bookmarklet above, then hover over this image and press <strong>R</strong> to edit it:</p>
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRkY2QjM1Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNDAiIGZpbGw9IndoaXRlIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNGRjZCMzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk1ha2UgbWUhPC90ZXh0Pgo8L3N2Zz4=" alt="Demo image - Make me!" class="demo-image">
            <p><em>This is a demo image. Try editing its source with the X-Ray Goggles!</em></p>
        </div>

        <div class="features">
            <div class="feature">
                <h3>‚Ä¶ And then, the world!</h3>
                <p>Install the goggles into your bookmarks bar and use them to remix <em>any</em> web page!</p>
            </div>
            
            <div class="feature">
                <h3>Share with friends!</h3>
                <p>Tap <strong>P</strong> to publish your hacks and share your creations with your friends.</p>
            </div>
            
            <div class="feature">
                <h3>Become a ninja!</h3>
                <p>Tap <strong>H</strong> to learn about more awesome powers like undo/redo and computed style editing.</p>
            </div>
        </div>

        <div class="achievement">
            <h3>Achievement Unlocked</h3>
            <h4>Image Source Hacker</h4>
            <p>Click on an attribute's value to edit it.</p>
            <p>Tap <strong>R</strong> to change the source code of an element.</p>
        </div>

        <div class="social">
            <h3>Follow and tweet</h3>
            <p>Have you published your first hack yet? Share it on Twitter with the tag <strong>#hackasaurus</strong>!</p>
            <p>Follow <a href="https://twitter.com/hackasaurus">@hackasaurus</a></p>
        </div>

        <div class="links">
            <div class="link-section">
                <h3>Learn more</h3>
                <ul>
                    <li><a href="#contact">Contact us</a></li>
                    <li><a href="#faq">Read our FAQ</a></li>
                    <li><a href="#build">Build with us</a></li>
                </ul>
            </div>
            
            <div class="link-section">
                <h3>Connect with Mozilla</h3>
                <ul>
                    <li><a href="#mission">Learn about Mozilla's mission</a></li>
                    <li><a href="#join">Join Mozilla</a></li>
                    <li><a href="#facebook">Like us on Facebook</a></li>
                </ul>
            </div>
        </div>

        <div class="languages">
            <h3>Other Languages</h3>
            <p>
                <a href="#en">English (United States)</a>
                <a href="#he">◊¢◊ë◊®◊ô◊™</a>
                <a href="#es">espa√±ol</a>
                <a href="#pl">polski</a>
                <a href="#nl">Nederlands</a>
                <a href="#hr">hrvatski</a>
                <a href="#zh-cn">‰∏≠Êñá (‰∏≠ÂõΩ)</a>
                <a href="#fr">fran√ßais</a>
                <a href="#de">Deutsch</a>
                <a href="#sq">shqipe</a>
                <a href="#zh-tw">‰∏≠Êñá (Âè∞Êπæ)</a>
                <a href="#ca">catal√†</a>
                <a href="#ja">Êó•Êú¨Ë™û</a>
                <a href="#it">italiano</a>
                <a href="#sr">–°—Ä–ø—Å–∫–∏</a>
            </p>
        </div>

        <div class="partners">
            <h3>Our partners</h3>
            <p>
                <a href="#macarthur">MacArthur Foundation</a><br>
                <a href="#hive">The Hive NYC</a>
            </p>
        </div>

        <div class="legal">
            <h3>Legal</h3>
            <p>
                <a href="#privacy">Privacy Policy</a>
                <a href="#legal">Legal Notices</a>
                <a href="#trademark">Report Trademark Abuse</a>
            </p>
        </div>

        <div class="copyright">
            ¬©2011 by individual mozilla.org contributors. Content available under a Creative Commons license.
        </div>
    </div>

    <script>
        // X-Ray Goggles Implementation
        (function() {
            'use strict';
            
            // Create the X-Ray Goggles namespace
            window.XRayGoggles = {
                active: false,
                overlay: null,
                highlight: null,
                toolbar: null,
                currentElement: null,
                clipboard: '',
                history: [],
                historyIndex: -1,
                
                activate: function() {
                    if (this.active) return;
                    
                    this.active = true;
                    this.createOverlay();
                    this.createToolbar();
                    this.bindEvents();
                    this.showHelp();
                },
                
                deactivate: function() {
                    if (!this.active) return;
                    
                    this.active = false;
                    this.removeOverlay();
                    this.removeToolbar();
                    this.unbindEvents();
                    this.closeAllModals();
                },
                
                createOverlay: function() {
                    this.overlay = document.createElement('div');
                    this.overlay.className = 'goggles-overlay';
                    document.body.appendChild(this.overlay);
                    
                    this.highlight = document.createElement('div');
                    this.highlight.className = 'goggles-highlight';
                    document.body.appendChild(this.highlight);
                },
                
                removeOverlay: function() {
                    if (this.overlay) {
                        this.overlay.remove();
                        this.overlay = null;
                    }
                    if (this.highlight) {
                        this.highlight.remove();
                        this.highlight = null;
                    }
                },
                
                createToolbar: function() {
                    this.toolbar = document.createElement('div');
                    this.toolbar.className = 'goggles-toolbar';
                    this.toolbar.innerHTML = `
                        <div>X-Ray Goggles Active</div>
                        <button onclick="XRayGoggles.showHelp()">H - Help</button>
                        <button onclick="XRayGoggles.publish()">P - Publish</button>
                        <button onclick="XRayGoggles.undo()">Undo</button>
                        <button onclick="XRayGoggles.deactivate()">Exit</button>
                    `;
                    document.body.appendChild(this.toolbar);
                },
                
                removeToolbar: function() {
                    if (this.toolbar) {
                        this.toolbar.remove();
                        this.toolbar = null;
                    }
                },
                
                bindEvents: function() {
                    this.mouseMoveHandler = this.handleMouseMove.bind(this);
                    this.clickHandler = this.handleClick.bind(this);
                    this.keyHandler = this.handleKeyPress.bind(this);
                    
                    document.addEventListener('mousemove', this.mouseMoveHandler);
                    document.addEventListener('click', this.clickHandler);
                    document.addEventListener('keydown', this.keyHandler);
                },
                
                unbindEvents: function() {
                    document.removeEventListener('mousemove', this.mouseMoveHandler);
                    document.removeEventListener('click', this.clickHandler);
                    document.removeEventListener('keydown', this.keyHandler);
                },
                
                handleMouseMove: function(e) {
                    if (!this.active) return;
                    
                    const element = document.elementFromPoint(e.clientX, e.clientY);
                    if (element && element !== this.currentElement) {
                        this.currentElement = element;
                        this.highlightElement(element);
                    }
                },
                
                handleClick: function(e) {
                    if (!this.active) return;
                    
                    e.preventDefault();
                    e.stopPropagation();
                    
                    if (this.currentElement) {
                        this.editElement(this.currentElement);
                    }
                },
                
                handleKeyPress: function(e) {
                    if (!this.active) return;
                    
                    switch(e.key.toLowerCase()) {
                        case 'r':
                            e.preventDefault();
                            if (this.currentElement) {
                                this.editElement(this.currentElement);
                            }
                            break;
                        case 'p':
                            e.preventDefault();
                            this.publish();
                            break;
                        case 'h':
                            e.preventDefault();
                            this.showHelp();
                            break;
                        case 'escape':
                            e.preventDefault();
                            this.closeAllModals();
                            break;
                    }
                },
                
                highlightElement: function(element) {
                    if (!this.highlight) return;
                    
                    const rect = element.getBoundingClientRect();
                    this.highlight.style.left = (rect.left + window.scrollX) + 'px';
                    this.highlight.style.top = (rect.top + window.scrollY) + 'px';
                    this.highlight.style.width = rect.width + 'px';
                    this.highlight.style.height = rect.height + 'px';
                    this.highlight.style.display = 'block';
                },
                
                editElement: function(element) {
                    this.saveToHistory();
                    
                    const editor = document.createElement('div');
                    editor.className = 'goggles-editor';
                    editor.innerHTML = `
                        <h3>Edit Element</h3>
                        <p><strong>Tag:</strong> ${element.tagName.toLowerCase()}</p>
                        <p><strong>Current HTML:</strong></p>
                        <textarea id="goggles-html">${element.outerHTML}</textarea>
                        <br>
                        <button onclick="XRayGoggles.applyEdit(this)">Apply Changes</button>
                        <button onclick="XRayGoggles.closeModal(this)">Cancel</button>
                    `;
                    
                    document.body.appendChild(editor);
                    this.currentModal = editor;
                },
                
                applyEdit: function(button) {
                    const editor = button.closest('.goggles-editor');
                    const textarea = editor.querySelector('textarea');
                    const newHTML = textarea.value;
                    
                    try {
                        // Create a temporary container to parse the HTML
                        const temp = document.createElement('div');
                        temp.innerHTML = newHTML;
                        const newElement = temp.firstElementChild;
                        
                        if (newElement && this.currentElement) {
                            // Replace the element
                            this.currentElement.parentNode.replaceChild(newElement, this.currentElement);
                            this.currentElement = newElement;
                        }
                        
                        this.closeModal(button);
                    } catch (e) {
                        alert('Invalid HTML. Please check your syntax.');
                    }
                },
                
                publish: function() {
                    const modal = document.createElement('div');
                    modal.className = 'goggles-editor';
                    modal.innerHTML = `
                        <h3>Publish Your Hack</h3>
                        <p>Your hack has been saved! Here's what you can do:</p>
                        <ul style="text-align: left;">
                            <li>Share the URL with friends</li>
                            <li>Take a screenshot of your changes</li>
                            <li>Copy the modified HTML</li>
                        </ul>
                        <p><strong>Current URL:</strong> ${window.location.href}</p>
                        <button onclick="XRayGoggles.closeModal(this)">Close</button>
                    `;
                    
                    document.body.appendChild(modal);
                    this.currentModal = modal;
                },
                
                showHelp: function() {
                    const modal = document.createElement('div');
                    modal.className = 'goggles-help';
                    modal.innerHTML = `
                        <h3>X-Ray Goggles Help</h3>
                        <ul>
                            <li><strong>Mouse over elements</strong> to highlight them</li>
                            <li><strong>Click or press R</strong> to edit an element</li>
                            <li><strong>Press P</strong> to publish your hack</li>
                            <li><strong>Press H</strong> to show this help</li>
                            <li><strong>Press Escape</strong> to close modals</li>
                            <li><strong>Undo button</strong> to revert changes</li>
                        </ul>
                        <p><em>Try editing the demo image above!</em></p>
                        <button onclick="XRayGoggles.closeModal(this)">Got it!</button>
                    `;
                    
                    document.body.appendChild(modal);
                    this.currentModal = modal;
                },
                
                saveToHistory: function() {
                    if (this.currentElement) {
                        this.history = this.history.slice(0, this.historyIndex + 1);
                        this.history.push({
                            element: this.currentElement,
                            html: this.currentElement.outerHTML
                        });
                        this.historyIndex = this.history.length - 1;
                    }
                },
                
                undo: function() {
                    if (this.historyIndex > 0) {
                        this.historyIndex--;
                        const state = this.history[this.historyIndex];
                        if (state && state.element && state.element.parentNode) {
                            state.element.outerHTML = state.html;
                        }
                    }
                },
                
                closeModal: function(button) {
                    const modal = button.closest('.goggles-editor, .goggles-help');
                    if (modal) {
                        modal.remove();
                    }
                },
                
                closeAllModals: function() {
                    const modals = document.querySelectorAll('.goggles-editor, .goggles-help');
                    modals.forEach(modal => modal.remove());
                }
            };
            
            // Auto-activate if this is the goggles page
            if (window.location.pathname.includes('goggles') || window.location.search.includes('goggles=true')) {
                setTimeout(() => {
                    XRayGoggles.activate();
                }, 1000);
            }
            
        })();
    </script>
</body>
</html>